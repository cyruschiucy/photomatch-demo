<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photo Display App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .aspect-9-16 {
            aspect-ratio: 9 / 16;
        }
        /* Ensure timer is circular, centered, and larger */
        .timer-circle {
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            width: 33%; /* Approx 1/3 of photo width */
            aspect-ratio: 1/1; /* Ensure circular shape */
            font-size: 2rem; /* Larger font size */
        }
        @media (max-width: 640px) {
            .timer-circle {
                font-size: 1.5rem; /* Slightly smaller on mobile */
            }
            .desc-text {
                font-size: 0.75rem; /* Smaller description text on mobile */
            }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center justify-center">
    <div class="container mx-auto p-4">
        <h1 class="text-3xl font-bold text-center mb-6">Photo Display App</h1>
        
        <!-- Display Mode Selection -->
        <div class="mb-6 text-center">
            <label for="displayMode" class="text-lg font-medium mr-2">Select Display Mode:</label>
            <select id="displayMode" class="p-2 border rounded-lg">
                <option value="four">4 Photos</option>
                <option value="one">1 Photo</option>
            </select>
        </div>

        <!-- Refresh Button for 4 Photos Mode -->
        <div id="refreshButtonContainer" class="mb-4 flex justify-center hidden">
            <button id="refreshButton" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600">Refresh</button>
        </div>

        <!-- Photo Display Area -->
        <div id="photoContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
            <!-- Photos will be dynamically inserted here -->
        </div>

        <!-- Navigation Button for 1 Photo Mode -->
        <div id="navButtons" class="mt-4 flex justify-center hidden">
            <button id="skipButton" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">Skip</button>
        </div>
    </div>

    <script>
        const images = [
            {
                src: 'https://i.imgur.com/GA4R6XL.jpeg',
                desc: 'Snow-capped mountains under a clear blue sky, ideal for a serene hiking adventure.'
            },
            {
                src: 'https://i.imgur.com/1VM7424.jpeg',
                desc: 'Golden autumn leaves fall in a vibrant forest, creating a peaceful and picturesque scene.'
            },
            {
                src: 'https://i.imgur.com/caXLoP1.jpeg',
                desc: 'Gentle ocean waves touch a sandy beach, with a sunset sky and soaring seagulls.'
            },
            {
                src: 'https://i.imgur.com/vnotmmp.jpeg',
                desc: 'Lush green valley with a winding river, framed by rolling hills and clouds.'
            },
            {
                src: 'https://i.imgur.com/XagFamV.jpeg',
                desc: 'Majestic waterfall flows down a rocky cliff, surrounded by misty, lush greenery.'
            },
            {
                src: 'https://i.imgur.com/eeTq6gc.png',
                desc: 'Starry desert night with cacti silhouetted against a glowing horizon, evoking tranquility.'
            },
            {
                src: 'https://i.imgur.com/OH2NhWP.png',
                desc: 'Colorful hot air balloons drift over a serene countryside with fields and villages.'
            },
            {
                src: 'https://i.imgur.com/qpa4IMk.jpeg',
                desc: 'Cozy alpine village in a snowy valley, glowing warmly under a twilight sky.'
            }
        ];

        const displayModeSelect = document.getElementById('displayMode');
        const photoContainer = document.getElementById('photoContainer');
        const navButtons = document.getElementById('navButtons');
        const skipButton = document.getElementById('skipButton');
        const refreshButtonContainer = document.getElementById('refreshButtonContainer');
        const refreshButton = document.getElementById('refreshButton');
        let currentImageIndex = 0;
        let timers = new Map(); // Track timers for each photo

        // Function to get random items
        function getRandomItems(array, n) {
            const shuffled = [...array].sort(() => Math.random() - 0.5);
            return shuffled.slice(0, n);
        }

        // Function to create a photo element
        function createPhotoElement(image, index) {
            const div = document.createElement('div');
            div.className = 'aspect-9-16 w-full overflow-hidden rounded-lg relative';
            div.dataset.index = index; // Store index for reference
            const img = document.createElement('img');
            img.src = image.src;
            img.alt = 'Photo';
            img.className = 'w-full h-full object-cover cursor-pointer';
            const descDiv = document.createElement('div');
            descDiv.className = 'absolute top-1/2 left-0 right-0 -translate-y-1/2 bg-black bg-opacity-70 text-white text-sm p-2 text-center desc-text';
            descDiv.textContent = image.desc;
            const timerDiv = document.createElement('div');
            timerDiv.className = 'absolute top-1/3 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-black bg-opacity-70 text-white timer-circle hidden';
            timerDiv.id = `timer-${index}`;
            div.appendChild(img);
            div.appendChild(descDiv);
            div.appendChild(timerDiv);
            return div;
        }

        // Function to start countdown timer
        function startCountdown(photoDiv, mode) {
            const index = photoDiv.dataset.index;
            if (timers.has(index)) return; // Prevent multiple timers

            const timerDiv = photoDiv.querySelector(`#timer-${index}`);
            let timeLeft = 15;
            timerDiv.textContent = timeLeft;
            timerDiv.classList.remove('hidden');

            const timer = setInterval(() => {
                timeLeft--;
                timerDiv.textContent = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    timers.delete(index);
                    timerDiv.classList.add('hidden');
                    replacePhoto(photoDiv, mode);
                }
            }, 1000);

            timers.set(index, timer);
        }

        // Function to replace photo with a random one
        function replacePhoto(photoDiv, mode) {
            const newImage = getRandomItems(images, 1)[0];
            const index = photoDiv.dataset.index;
            const img = photoDiv.querySelector('img');
            const descDiv = photoDiv.querySelector('.bg-black.bg-opacity-70');
            img.src = newImage.src;
            descDiv.textContent = newImage.desc;
            if (mode === 'one') {
                currentImageIndex = images.findIndex(img => img.src === newImage.src);
            }
        }

        function updateDisplay() {
            const mode = displayModeSelect.value;
            photoContainer.innerHTML = ''; // Clear existing photos
            timers.forEach(timer => clearInterval(timer));
            timers.clear();

            if (mode === 'four') {
                // Display 4 photos in a 2x2 grid on mobile, 4-column on larger screens
                photoContainer.classList.remove('grid-cols-1');
                photoContainer.classList.add('grid-cols-2', 'sm:grid-cols-2', 'lg:grid-cols-4');
                navButtons.classList.add('hidden');
                refreshButtonContainer.classList.remove('hidden');
                const randomImages = getRandomItems(images, 4);
                randomImages.forEach((image, i) => {
                    const photoDiv = createPhotoElement(image, i);
                    photoDiv.querySelector('img').addEventListener('click', () => startCountdown(photoDiv, 'four'));
                    photoContainer.appendChild(photoDiv);
                });
            } else {
                // Display one photo
                photoContainer.classList.remove('grid-cols-2', 'sm:grid-cols-2', 'lg:grid-cols-4');
                photoContainer.classList.add('grid-cols-1');
                navButtons.classList.remove('hidden');
                refreshButtonContainer.classList.add('hidden');
                const div = createPhotoElement(images[currentImageIndex], 0);
                div.querySelector('img').addEventListener('click', () => startCountdown(div, 'one'));
                photoContainer.appendChild(div);
            }
        }

        // Skip button handler for random photo in 1 Photo mode
        skipButton.addEventListener('click', () => {
            const newIndex = Math.floor(Math.random() * images.length);
            currentImageIndex = newIndex;
            updateDisplay();
        });

        // Refresh button handler for randomizing 4 Photos mode
        refreshButton.addEventListener('click', () => {
            updateDisplay();
        });

        // Update display when mode changes
        displayModeSelect.addEventListener('change', () => {
            currentImageIndex = Math.floor(Math.random() * images.length); // Random initial image
            updateDisplay();
        });

        // Initial display
        updateDisplay();
    </script>
</body>
</html>
